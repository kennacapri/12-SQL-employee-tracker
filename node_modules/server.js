const mysqli = require("mysql");
const inquirer = require("inquirer");
const inqhelpers = require("./")

const helpers = new inqhelpers();

const connection = mysql.createConnection({
    host: "localhost",
    port: 3306,
    user: "root",
    password: "password",
    database: "employee_tracker_db",
});

async function start() {
    try {
        const todo = await inquirer.prompt({
type: "list",
message: "What would you like to?",
name: "userChoice",
choices: [
    "View all Employees",
    "Add Employee",
    "Update Employee Role",
    "View All Roles",
    "Add Role",
    "View all Departments",
    "Add Department",
    "Quit",
    
],
    });
const { userChoice } = todo;
switch (userChoice) {
    case "View All Employees":
        await helpers.viewEmployees(connection);
        await start();
        break;
    case "Add Employee":
        await helpers.addEmploye(connection);
        await start();
        break;
    case "Update Employee Role":
        await helpers.updateRole(connection);
        await start();
        break;
    case "View All Roles":
        await helpers.viewRoles(connection);
        await start();
        break;
    case "Add Role":
        await helpers.addRole(connection);
        await start();
        break;
    case "View All Departments":
        await helpers.viewDepartments(connection);
        await start();
        break;
    case "Add Department":
        await helpers.addDepartment(connection);
        await start();
        break;

            default:
            break;
    }
    return userChoice;
} catch (err) {
    throw err;
}
}